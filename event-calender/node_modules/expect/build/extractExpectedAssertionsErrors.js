'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.default = void 0;
<<<<<<< HEAD

var _jestMatcherUtils = require('jest-matcher-utils');

var _jestMatchersObject = require('./jestMatchersObject');

/**
 * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.
=======
var _jestMatcherUtils = require('jest-matcher-utils');
var _jestMatchersObject = require('./jestMatchersObject');
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
>>>>>>> f6c5fc1a7402386b3dd8f6bde372c11acb9313a4
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */
<<<<<<< HEAD
=======

>>>>>>> f6c5fc1a7402386b3dd8f6bde372c11acb9313a4
const resetAssertionsLocalState = () => {
  (0, _jestMatchersObject.setState)({
    assertionCalls: 0,
    expectedAssertionsNumber: null,
<<<<<<< HEAD
    isExpectingAssertions: false
  });
}; // Create and format all errors related to the mismatched number of `expect`
// calls and reset the matcher's state.

=======
    isExpectingAssertions: false,
    numPassingAsserts: 0
  });
};

// Create and format all errors related to the mismatched number of `expect`
// calls and reset the matcher's state.
>>>>>>> f6c5fc1a7402386b3dd8f6bde372c11acb9313a4
const extractExpectedAssertionsErrors = () => {
  const result = [];
  const {
    assertionCalls,
    expectedAssertionsNumber,
    expectedAssertionsNumberError,
    isExpectingAssertions,
    isExpectingAssertionsError
  } = (0, _jestMatchersObject.getState)();
  resetAssertionsLocalState();
<<<<<<< HEAD

=======
>>>>>>> f6c5fc1a7402386b3dd8f6bde372c11acb9313a4
  if (
    typeof expectedAssertionsNumber === 'number' &&
    assertionCalls !== expectedAssertionsNumber
  ) {
    const numOfAssertionsExpected = (0, _jestMatcherUtils.EXPECTED_COLOR)(
      (0, _jestMatcherUtils.pluralize)('assertion', expectedAssertionsNumber)
    );
    expectedAssertionsNumberError.message =
<<<<<<< HEAD
      (0, _jestMatcherUtils.matcherHint)(
        '.assertions',
        '',
        String(expectedAssertionsNumber),
        {
          isDirectExpectCall: true
        }
      ) +
      '\n\n' +
      `Expected ${numOfAssertionsExpected} to be called but received ` +
      (0, _jestMatcherUtils.RECEIVED_COLOR)(
        (0, _jestMatcherUtils.pluralize)('assertion call', assertionCalls || 0)
      ) +
      '.';
=======
      `${(0, _jestMatcherUtils.matcherHint)(
        '.assertions',
        '',
        expectedAssertionsNumber.toString(),
        {
          isDirectExpectCall: true
        }
      )}\n\n` +
      `Expected ${numOfAssertionsExpected} to be called but received ${(0,
      _jestMatcherUtils.RECEIVED_COLOR)(
        (0, _jestMatcherUtils.pluralize)('assertion call', assertionCalls || 0)
      )}.`;
>>>>>>> f6c5fc1a7402386b3dd8f6bde372c11acb9313a4
    result.push({
      actual: assertionCalls.toString(),
      error: expectedAssertionsNumberError,
      expected: expectedAssertionsNumber.toString()
    });
  }
<<<<<<< HEAD

=======
>>>>>>> f6c5fc1a7402386b3dd8f6bde372c11acb9313a4
  if (isExpectingAssertions && assertionCalls === 0) {
    const expected = (0, _jestMatcherUtils.EXPECTED_COLOR)(
      'at least one assertion'
    );
    const received = (0, _jestMatcherUtils.RECEIVED_COLOR)('received none');
<<<<<<< HEAD
    isExpectingAssertionsError.message =
      (0, _jestMatcherUtils.matcherHint)('.hasAssertions', '', '', {
        isDirectExpectCall: true
      }) +
      '\n\n' +
      `Expected ${expected} to be called but ${received}.`;
=======
    isExpectingAssertionsError.message = `${(0, _jestMatcherUtils.matcherHint)(
      '.hasAssertions',
      '',
      '',
      {
        isDirectExpectCall: true
      }
    )}\n\nExpected ${expected} to be called but ${received}.`;
>>>>>>> f6c5fc1a7402386b3dd8f6bde372c11acb9313a4
    result.push({
      actual: 'none',
      error: isExpectingAssertionsError,
      expected: 'at least one'
    });
  }
<<<<<<< HEAD

  return result;
};

=======
  return result;
};
>>>>>>> f6c5fc1a7402386b3dd8f6bde372c11acb9313a4
var _default = extractExpectedAssertionsErrors;
exports.default = _default;
